const productData = [
    {
        productDescription: {
            span: "1",
            name: "ИС-64",
            type: "",
            country: "",
            description: "Premium Account allows to research desirable vehicles quicker and to save time on its purchase. It gives more Credits and Experience per battle.  It is a great deal as the profit after paying for repairs and ammo increases two- or threefold, depending on your performance in battle (amount of damage, destroyed enemies, base captured/defended, enemies detected, etc).",
        },
        productImage: "https://ru-wotp.wgcdn.co/dcont/fb/image/r165_object_703_ii_1300_big_1.png",
        productCost: "$ 58.99",
        productID: 1,
    },
    {
        productDescription: {
            span: "2",
            name: "ИС-6",
            type: "",
            country: "",
            description: "Premium Account allows to research desirable vehicles quicker and to save time on its purchase. It gives more Credits and Experience per battle.  It is a great deal as the profit after paying for repairs and ammo increases two- or threefold, depending on your performance in battle (amount of damage, destroyed enemies, base captured/defended, enemies detected, etc).",
        },
        productImage: "https://ru-wotp.wgcdn.co/dcont/fb/image/r165_object_703_ii_1300_big_1.png",
        productCost: "$ 58.99",
        productID: 2,
    },
    {
        productDescription: {
            span: "2",
            name: "ИС-6",
            type: "",
            country: "",
            description: "Premium Account allows to research desirable vehicles quicker and to save time on its purchase. It gives more Credits and Experience per battle.  It is a great deal as the profit after paying for repairs and ammo increases two- or threefold, depending on your performance in battle (amount of damage, destroyed enemies, base captured/defended, " +
                "enemies detected, etc).",
        },
        productImage: "https://ru-wotp.wgcdn.co/dcont/fb/image/r165_object_703_ii_1300_big_1.png",
        productCost: "$ 58.99",
        productID: 3,
    },
    {
        productDescription: {
            span: "2",
            name: "ИС-6",
            type: "",
            country: "",
            description: "Premium Account allows to research desirable vehicles quicker and to save time on its purchase. It gives more Credits and Experience per battle.  It is a great deal as the profit after paying for repairs and ammo increases two- or threefold, depending on your performance in battle (amount of damage, destroyed enemies, base captured/defended, " +
                "enemies detected, etc).",
        },
        productImage: "https://ru-wotp.wgcdn.co/dcont/fb/image/r165_object_703_ii_1300_big_1.png",
        productCost: "$ 58.99",
        productID: 4,
    },
    {
        productDescription: {
            span: "2",
            name: "ИС-6",
            type: "",
            country: "",
            description: "Premium Account allows to research desirable vehicles quicker and to save time on its purchase. It gives more Credits and Experience per battle.  It is a great deal as the profit after paying for repairs and ammo increases two- or threefold, depending on your performance in battle (amount of damage, destroyed enemies, base captured/defended, " +
                "enemies detected, etc).",
        },
        productImage: "https://ru-wotp.wgcdn.co/dcont/fb/image/r165_object_703_ii_1300_big_1.png",
        productCost: "$ 58.99",
        productID: 5,
    },
    {
        productDescription: {
            span: "1",
            name: "ИС-6",
            type: "",
            country: "",
            description: "Premium Account allows to research desirable vehicles quicker and to save time on its purchase. It gives more Credits and Experience per battle.  It is a great deal as the profit after paying for repairs and ammo increases two- or threefold, depending on your performance in battle (amount of damage, destroyed enemies, base captured/defended, " +
                "enemies detected, etc).",
        },
        productImage: "https://ru-wotp.wgcdn.co/dcont/fb/image/r165_object_703_ii_1300_big_1.png",
        productCost: "$ 58.99",
        productID: 6,
    },
    {
        productDescription: {
            span: "1",
            name: "ИС-6",
            type: "",
            country: "",
            description: "Premium Account allows to research desirable vehicles quicker and to save time on its purchase. It gives more Credits and Experience per battle.  It is a great deal as the profit after paying for repairs and ammo increases two- or threefold, depending on your performance in battle (amount of damage, destroyed enemies, base captured/defended, " +
                "enemies detected, etc).",
        },
        productImage: "https://ru-wotp.wgcdn.co/dcont/fb/image/r165_object_703_ii_1300_big_1.png",
        productCost: "$ 58.99",
        productID: 7,
    },
    {
        productDescription: {
            span: "1",
            name: "ИС-6",
            type: "",
            country: "",
            description: "Premium Account allows to research desirable vehicles quicker and to save time on its purchase. It gives more Credits and Experience per battle.  It is a great deal as the profit after paying for repairs and ammo increases two- or threefold, depending on your performance in battle (amount of damage, destroyed enemies, base captured/defended, " +
                "enemies detected, etc).",
        },
        productImage: "https://ru-wotp.wgcdn.co/dcont/fb/image/r165_object_703_ii_1300_big_1.png",
        productCost: "$ 58.99",
        productID: 8,
    }
    ,
    {
        productDescription: {
            span: "1",
            name: "ИС-6",
            type: "",
            country: "",
            description: "Premium Account allows to research desirable vehicles quicker and to save time on its purchase. It gives more Credits and Experience per battle.  It is a great deal as the profit after paying for repairs and ammo increases two- or threefold, depending on your performance in battle (amount of damage, destroyed enemies, base captured/defended, " +
                "enemies detected, etc).",
        },
        productImage: "https://ru-wotp.wgcdn.co/dcont/fb/image/r165_object_703_ii_1300_big_1.png",
        productCost: "$ 58.99",
        productID: 9,
    }
    ,
    {
        productDescription: {
            span: "1",
            name: "ИС-6",
            type: "",
            country: "",
            description: "Premium Account allows to research desirable vehicles quicker and to save time on its purchase. It gives more Credits and Experience per battle.  It is a great deal as the profit after paying for repairs and ammo increases two- or threefold, depending on your performance in battle (amount of damage, destroyed enemies, base captured/defended, " +
                "enemies detected, etc).",
        },
        productImage: "https://ru-wotp.wgcdn.co/dcont/fb/image/r165_object_703_ii_1300_big_1.png",
        productCost: "$ 58.99",
        productID: 10,
    }
    ,
    {
        productDescription: {
            span: "1",
            name: "ИС-6",
            type: "",
            country: "",
            description: "Premium Account allows to research desirable vehicles quicker and to save time on its purchase. It gives more Credits and Experience per battle.  It is a great deal as the profit after paying for repairs and ammo increases two- or threefold, depending on your performance in battle (amount of damage, destroyed enemies, base captured/defended, " +
                "enemies detected, etc).",
        },
        productImage: "https://ru-wotp.wgcdn.co/dcont/fb/image/r165_object_703_ii_1300_big_1.png",
        productCost: "$ 58.99",
        productID: 11,
    }
    ,
    {
        productDescription: {
            span: "1",
            name: "ИС-6",
            type: "",
            country: "",
            description: "Premium Account allows to research desirable vehicles quicker and to save time on its purchase. It gives more Credits and Experience per battle.  It is a great deal as the profit after paying for repairs and ammo increases two- or threefold, depending on your performance in battle (amount of damage, destroyed enemies, base captured/defended, " +
                "enemies detected, etc).",
        },
        productImage: "https://ru-wotp.wgcdn.co/dcont/fb/image/r165_object_703_ii_1300_big_1.png",
        productCost: "$ 58.99",
        productID: 12,
    }
    ,
    {
        productDescription: {
            span: "1",
            name: "ИС-6",
            type: "",
            country: "",
            description: "Premium Account allows to research desirable vehicles quicker and to save time on its purchase. It gives more Credits and Experience per battle.  It is a great deal as the profit after paying for repairs and ammo increases two- or threefold, depending on your performance in battle (amount of damage, destroyed enemies, base captured/defended, " +
                "enemies detected, etc).",
        },
        productImage: "https://ru-wotp.wgcdn.co/dcont/fb/image/r165_object_703_ii_1300_big_1.png",
        productCost: "$ 58.99",
        productID: 13,
    }
]
const userDate = {
    wishlist: [],
    shopping: [],
}

function wishlistInitial() {
    const $wishlist = document.getElementById("wishlistId")
    $wishlist.innerText = `(${userDate.wishlist.length})`
}

function shoppingInitial() {
    const $shopping = document.getElementById("shoppingId")
    $shopping.innerText = `(${userDate.shopping.length})`
}

wishlistInitial()
shoppingInitial()

/*{
    productDescription: {
            span: "1",
            name: "ИС-64",
            type: "",
            country: "",
            description:"Premium Account allows to research desirable vehicles quicker and to save time on its purchase. It gives more Credits and Experience per battle. <br/> It is a great deal as the profit after paying for repairs and ammo increases two- or threefold, depending on your performance in battle
                            (amount of damage, destroyed enemies, base captured/defended, enemies detected, etc).",
    },
    productImage: "https://ru-wotp.wgcdn.co/dcont/fb/image/r165_object_703_ii_1300_big_1.png",
    productCost: "$ 58.99",
    productID: 1,
}*/

function moveProduct($product) {
    const $moveProduct = $product.cloneNode(true);
    //определение размеров и положения продукта для анимации
    let {left:leftProduct,top:topProduct, height:heightProduct, width:widthProduct} = $product.getBoundingClientRect()
    //определение размеров и положения цели для анимации
    const {left, top, height, width} = document.getElementById("shoppingId").getBoundingClientRect()
    $moveProduct.classList.add("moveProductItem")
    //если продукт за экраном выставляем поцентру
    if((topProduct+heightProduct*0.75) < top){
        topProduct = 175
        leftProduct = 15
    }
    //определяем положене и разменры для элемента анимации
    $moveProduct.style.width = `${widthProduct}px`
    $moveProduct.style.height = `${heightProduct}px`
    $moveProduct.style.top = `${topProduct}px`
    $moveProduct.style.left = `${leftProduct}px`


    const $body = document.getElementById("bodyId")
    //устанавливаем задержку для старта анимации !!без нее анимация отработает до рендера!!
    setTimeout(() => {
        $moveProduct.style.transform = `translate3d(${left + width / 2 - widthProduct / 2 - leftProduct}px, ${top + height / 2 - heightProduct / 2 - topProduct}px, 0px)
         scale3d(0.1,0.1,0.1) rotate(360deg)`
        $moveProduct.style.opacity = 0.2
        $moveProduct.addEventListener("transitionend", () => {
            $moveProduct.remove()
        })
    })
    //добавляем элемент для анимации
    $body.append($moveProduct)
}

const errorMessage = "передан недействительный идентификатор продукта"

function createItem(itemId, productData) {
    const $container = document.getElementsByClassName(`mainContainer`)
    let itemData = productData.filter((product) => product.productID === itemId)
    const $item = document.createElement('main');
    $item.classList.add('mainItemContent')
    if (!itemData.length) {
        $item.innerHTML = `<p style="min-height: 100vh">Продукт не найден</p>`
        $container[0].append($item)
        throw {errorMessage, itemId}
    }
    itemData = itemData[0]
    $item.innerHTML = `
            <h2>${itemData.productDescription.name}</h2>
            <img src=${itemData.productImage} alt="${itemData.productDescription.name}"/>
            <div class="purchaseContainer">
                <span class="priceItem">${itemData.productCost}</span>
                <button class="purchaseButton">purchase</button>
            </div>
            <p class="itemDescription">${itemData.productDescription.description}</p>`

    const $button = $item.querySelector("button")
    const $img = $item.querySelector("img")
    $button.addEventListener("click", (event) => {
        moveProduct($img)
        userDate.shopping.push(itemData)
        shoppingInitial()
    }, false)


    $container[0].append($item)

    /*while ($container.firstChild) {
        $parent.removeChild($parent.firstChild);
    }
    $parent.append($item)
    */

}


createItem(2, productData)